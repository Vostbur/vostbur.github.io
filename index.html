<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Little things about IT</title>
<meta name=description content><meta name=author content><link rel=canonical href=https://vostbur.github.io/><link crossorigin=anonymous href=/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css integrity="sha256-yIlj/i15RiAA/Q+xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as=style><link rel=icon href=https://vostbur.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://vostbur.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://vostbur.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://vostbur.github.io/apple-touch-icon.png><link rel=mask-icon href=https://vostbur.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.134.2"><link rel=alternate type=application/rss+xml href=https://vostbur.github.io/index.xml><link rel=alternate hreflang=en href=https://vostbur.github.io/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Little things about IT"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://vostbur.github.io/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Little things about IT"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"Little things about IT","url":"https://vostbur.github.io/","description":"","thumbnailUrl":"https://vostbur.github.io/favicon.ico","sameAs":[]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://vostbur.github.io/ accesskey=h title="Little things about IT (Alt + H)">Little things about IT</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></span></div><ul id=menu><li><a href=https://vostbur.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://vostbur.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://github.com/Vostbur title=github.com/Vostbur><span>github.com/Vostbur</span></a></li></ul></nav></header><main class=main><article class=first-entry><header class=entry-header><h2>Логирование vESR на удаленный сервер rsyslog</h2></header><section class=entry-content><p>Настраиваем сервер rsyslog на прием логов по сети. На примере Ubuntu.
Редактируем /etc/rsyslog.conf:
Раскомментируем строки чтобы получать логи по TCP (для UDP - похожие строки, только модуль “imudp”)
module(load="imtcp") input(type="imtcp" port="514") в конце файла добавить
global( parser.escapecontrolcharactertab="off" ) иначе будет ругаться на какие-то символы табуляции в логах с vesr. Для сохранения логов с разных ip в отдельные каталоги добавить строки
$template FILENAME,"/var/log/vesr/%fromhost-ip%/syslog.log" *.* ?FILENAME перезапускаем службу
sudo service rsyslog restart Логи с vesr 192.168.0.99 будут складываться в /var/log/vesr/192.168.0.99/syslog.log
...</p></section><footer class=entry-footer>&lt;span title='2024-09-19 00:00:00 +0000 UTC'>September 19, 2024&lt;/span></footer><a class=entry-link aria-label="post link to Логирование vESR на удаленный сервер rsyslog" href=https://vostbur.github.io/posts/vesr-logs-to-remote-rsyslog-server/></a></article><article class=post-entry><header class=entry-header><h2>Управление Eltex vESR через модули Ansible от Cisco</h2></header><section class=entry-content><p>В июне 2023 года российский разработчик и производитель телекоммуникационного оборудования Eltex представил виртуальный сервисный маршрутизотор vESR, доступный для бесплатного тестированя в базовой версии.
Конфигурационные команды схожи с Cisco, и при небольших изменениях кода модули Ansible ios_command и ios_config тоже успешно работают.
Для этого надо поменять (у меня Ansible установлен в домашнем каталоге пользователя):
в файле ~/.local/lib/python3.10/dist-packages/ansible_collections/cisco/ios/plugins/cliconf/ios.py в строке self.send_command("configure terminal") выражение "configure terminal" на "configure"
в файле ~/.local/lib/python3.10/dist-packages/ansible_collections/cisco/ios/plugins/terminal/ios.py в строке self._exec_cli_command(b"terminal lenght 0") выражение "terminal lenght 0" на "terminal datadump"
...</p></section><footer class=entry-footer>&lt;span title='2023-10-29 00:00:00 +0000 UTC'>October 29, 2023&lt;/span></footer><a class=entry-link aria-label="post link to Управление Eltex vESR через модули Ansible от Cisco" href=https://vostbur.github.io/posts/cisco-ansible-modul-for-vesr/></a></article><article class=post-entry><header class=entry-header><h2>Решение проблем с менеджером пакетов Windows</h2></header><section class=entry-content><p>В апреле 2014 года Microsoft представила OneGet (позже переименованный в PackageManagement) вместе с PowerShell 5. Это бесплатный менеджер поставщиков пакетов с открытым исходным кодом, который позволяет интегрировать другие менеджеры пакетов в PowerShell. — Wikipedia
Команды PackageManagement Get-Command -Module PackageManagement Find-Package — поиск пакета (программы) в доступных репозиториях Find-PackageProvider — поиск провайдеров распространения пакетов Get-Package — показывает список установленных пакетов Get-PackageProvider — выводит список поставщиков пакетов, доступных на компьютере Get-PackageSource — выводит список доступных источников пакетов Import-PackageProvider — добавляет поставщиков пакетов управления пакетами в текущий сеанс Install-Package — устанавливает пакет (программу) на компьютер Install-PackageProvider — устанавливает одного или нескольких поставщиков пакетов управления пакетами. Register-PackageSource — добавляет источник пакета для поставщика Save-Package — сохраняет пакет локально, не устанавливая его Set-PackageSource — устанавливает поставщика в качестве источника пакета Uninstall-Package — удаляет программу (пакет) Unregister-PackageSource — удаляет провайдера из списка источников пакетов Возникшие проблемы на примере утановки golang из репозитория Chocolatey PS C:\WINDOWS\system32> Find-Package -Name *golang* -Source Chocolatey ПРЕДУПРЕЖДЕНИЕ: NuGet: Запрос был прерван: Не удалось создать защищенный канал SSL/TLS. В PowerShell по умолчанию используется TLS 1.0. Меняем версию TLS по умолчанию в .NET Framework на 1.2
...</p></section><footer class=entry-footer>&lt;span title='2023-08-13 00:00:00 +0000 UTC'>August 13, 2023&lt;/span></footer><a class=entry-link aria-label="post link to Решение проблем с менеджером пакетов Windows" href=https://vostbur.github.io/posts/windows-package-management/></a></article><article class=post-entry><header class=entry-header><h2>The solve of the Cisco course's final exam</h2></header><section class=entry-content><p>Study the scheme. Split the network into subnets, addressing 5.87.0.0/24. Each PC is on a separate network. Perform basic configuration of all network devices. Raise only SSH protocol for management. Configure a separate VLAN for each PC on the switches and forward them to the router. Enable Port Fast BPDU Guard on internal interfaces. Enable Rapid PVST. Configure the OSPF protocol for routers, not including networks on internal interfaces. Raise a floating static route for OSPF protocol redundancy. Configure the GRE 1 protocol for the R1 - R2 - R4 route, GRE 2 for the R1 – R3 - R4 route, the routing method for connecting GRE and LAN is OSPF Configure the ACL to manage all devices only with MGT1 PC (SSH). Configure all devices time and data transfer to Syslog server (Server0). Transfer the image and start-up configuration to TFTP Server0. Configure backup downloading from TFTP images on routers. Check the network operability in case of failure of the OSPF protocol. Answer Key Cisco Packet Tracer project R1 startup configure file R2 startup configure file R3 startup configure file R4 startup configure file S1 startup configure file S1 startup configure file</p></section><footer class=entry-footer>&lt;span title='2022-03-23 00:00:00 +0000 UTC'>March 23, 2022&lt;/span></footer><a class=entry-link aria-label="post link to The solve of the Cisco course's final exam" href=https://vostbur.github.io/posts/cisco-lab-answer-key/></a></article><article class=post-entry><header class=entry-header><h2>Backup (clone) all your own gists</h2></header><section class=entry-content><p>You need to have a personal access token to GitHub. In this script I use my token saved in ~/.github_access_token.
Also you need to have the git utility on your system.
Install PyGithub package to work with GitHub API
pip install PyGithub The gist is actually a git repository. All your gists you can clone as regular repositories into a directory called repos. Script clones gists with names contained the IDs. Also script creates index.json which contains an array of objects describing what you got.
...</p></section><footer class=entry-footer>&lt;span title='2022-03-13 00:00:00 +0000 UTC'>March 13, 2022&lt;/span></footer><a class=entry-link aria-label="post link to Backup (clone) all your own gists" href=https://vostbur.github.io/posts/backup-all-your-own-gists/></a></article><article class=post-entry><header class=entry-header><h2>Django с PostgreSQL в Astra Linux SE 1.5</h2></header><section class=entry-content><p>Устанавливаем необходимые пакеты с зависимостями: postgresql, python-psycopg2. В ALSE 1.5 основная версия PostgreSQL 9.4.5.
Редактируем конфигурационный файл базы данных
$ sudo vim /etc/postgresql/9.4/main/pg_hba.conf Комментируем или удаляем все строки и дописываем новые, разделяя поля табуляцией
local all postgres trust local all all trust host all all 127.0.0.1/32 trust host all all 192.168.15.129/24 trust host all all 192.168.15.132/24 trust Последние строки - адреса сервера и клиента, которым будем подключаться. Меняйте на свои или укажите всю сеть, например 192.168.15.0/24.
...</p></section><footer class=entry-footer>&lt;span title='2022-02-19 00:00:00 +0000 UTC'>February 19, 2022&lt;/span></footer><a class=entry-link aria-label="post link to Django с PostgreSQL в Astra Linux SE 1.5" href=https://vostbur.github.io/posts/astra-linux-django-web-app-with-postgresql/></a></article><article class=post-entry><header class=entry-header><h2>Web-приложение на Python в Astra Linux с ALD авторизацией</h2></header><section class=entry-content><p>Как настроить сервер - контроллер домена ALD и подключиться к нему клиентом в статье Настройка входа в систему с Astra Linux Directory.
Устанавливаем web-сервер (если еще не установлен), нужные нам модули apache и пакет с django
$ sudo apt-get install apache2 libapache2-mod-auth-kerb libapache2-mod-python python-django Включаем модули apache, с которыми будем работать, отключаем лишний auth_pam, если ранее с ним работали, затем запускаем web-сервер
$ sudo a2dismod auth_pam $ sudo a2enmod python $ sudo a2enmod auth_kerb $ sudo service apache2 reload Создаем принципала в ALD и добавляем его в группу mac
...</p></section><footer class=entry-footer>&lt;span title='2022-02-18 00:00:00 +0000 UTC'>February 18, 2022&lt;/span></footer><a class=entry-link aria-label="post link to Web-приложение на Python в Astra Linux с ALD авторизацией" href=https://vostbur.github.io/posts/astra-linux-django-web-app-with-ald-auth/></a></article><article class=post-entry><header class=entry-header><h2>Настройка входа в систему с Astra Linux Directory</h2></header><section class=entry-content><p>Из документации:
Служба ALD (Astra Linux Directory) представляет собой систему управления ЕПП (единое пространство пользователей). Она является надстройкой над технологиями LDAP, Kerberos 5, CIFS и обеспечивает автоматическую настройку всех необходимых файлов конфигурации служб, реализующих перечисленные технологии, а так же предоставляет интерфейс управления и администрирования. Настройка окружения пользователя при входе в систему обеспечивается PAMмодулем ALD, который выполняет следующие функции: – получение параметров окружения пользователя с сервера домена; – проверка возможности входа пользователя на данный компьютер по списку разрешенных пользователю компьютеров; – проверка возможности использования пользователем типа ФС его домашнего каталога; – настройка параметров окружения пользователя; – монтирование домашнего каталога пользователя; – включение доменного пользователя в заданные локальные группы. Для корректной работы надо убедиться, что доменные имена сервера и клиентов корректно отображаются. В файле /etc/hosts к полному доменному имени должен быть короткий псевдоним, дублирующую запись для 127.0.1.1 стоит закоментировать или удалить
...</p></section><footer class=entry-footer>&lt;span title='2022-02-16 00:00:00 +0000 UTC'>February 16, 2022&lt;/span></footer><a class=entry-link aria-label="post link to Настройка входа в систему с Astra Linux Directory" href=https://vostbur.github.io/posts/ald-auth-astra-linux-se-15/></a></article><article class=post-entry><header class=entry-header><h2>Запуск Django-приложений через mod_python в Astra Linux SE 1.5</h2></header><section class=entry-content><p>Считаем, что Apache уже установлен и настроена аутентификация и авторизация через PAM (см. Настройка web-сервера на Astra Linux SE 1.5)
Устанавливаем необходимые пакеты:
# apt-get install libapache2-mod-python python-django Включаем модуль:
# a2enmod python Создаем проект Django и каталог для log-файлов:
# cd /var/www # django-admin startproject django_site # mkdir django_site/log В /etc/apache2/sites-available/ создаем файл django_site. Это файл конфигурации виртуального хоста для нашего Django-проекта, лежащего в каталоге /var/www/django_site/.
&lt;VirtualHost *:80> ServerAdmin webmaster@domain.name ServerName server.domain.name DocumentRoot /var/www/django_site &lt;Directory "/var/www/django_site/"> AuthPAM_Enabled on AuthType Basic AuthName "PAM authentication" require valid-user Options -Indexes FollowSymLinks -MultiViews AllowOverride None Order deny,allow Allow from all &lt;/Directory> &lt;Location "/"> SetHandler python-program PythonHandler django.core.handlers.modpython SetEnv DJANGO_SETTINGS_MODULE django_site.settings PythonOption diango.root /var/www/django_site PythonPath "['/var/www/django_site/',] + sys.path" PythonAutoReload On &lt;/Location> &lt;Location "/media/”> SetHandler None &lt;/Location> &lt;Location "/static/"> SetHandler None &lt;/Location> &lt;LocationMatch "\.(jpg|gif|png)$"> SetHandler None &lt;/LocationMatch> ErrorLog /var/www/django_site/log/error.log LogLevel warn CustomLog /var/www/django_site/log/access.log combined &lt;/VirtualHost> Включаем наш сайт в список разрешенных и перезапускаем web-сервер
...</p></section><footer class=entry-footer>&lt;span title='2022-02-04 00:00:00 +0000 UTC'>February 4, 2022&lt;/span></footer><a class=entry-link aria-label="post link to Запуск Django-приложений через mod_python в Astra Linux SE 1.5" href=https://vostbur.github.io/posts/django-starting-astra-linux-se-15/></a></article><article class=post-entry><header class=entry-header><h2>Настройка web-сервера на Astra Linux SE 1.5</h2></header><section class=entry-content><p>Web-сервер Apache2, входящий в состав Astra Linux SE 1.5 Smolensk, не допускает возможности анонимного использования ресурсов web-сервера и требует обязательной настройки авторизации пользователей.
Для обеспечения нормальной работы пользователя с сетевыми сервисами должны быть явно заданы диапазоны его мандатных уровней и категорий, даже если ему не доступны уровни и категории выше 0.
# pdpl-user -z &lt;имя_пользователя> После установки сервера необходимо установить пакет libapache2-mod-auth-pam. После этого сервер настроен и готов к приему запросов на всех сетевых интерфейсах на 80 порту. Если по каким-то причинам он не работоспособен, следует проверить минимально необходимые настройки сервера.
...</p></section><footer class=entry-footer>&lt;span title='2022-02-03 00:00:00 +0000 UTC'>February 3, 2022&lt;/span></footer><a class=entry-link aria-label="post link to Настройка web-сервера на Astra Linux SE 1.5" href=https://vostbur.github.io/posts/apache2-astra-linux-se-15/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://vostbur.github.io/page/2/>Next Page »</a></nav></footer></main><footer class=footer><span>&copy; 2024 <a href=https://vostbur.github.io/>Little things about IT</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>